<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover"
  />
  <title>90 Surge - Free T-shirt!</title>

  <!-- Site styles + raffle app logic -->
  <link rel="stylesheet" href="/public/styles.css" />
  <script type="module" src="/public/app.js"></script>

  <!-- Slot machine script (must exist at /public/slot.js) -->
  <script src="/public/slot.js" defer></script>
</head>

<body>
  <form id="raffle-form" method="POST" novalidate>
    <div class="rules">
      <div class="logo-wrap">
        <img
          src="https://pub-d919971fb927454bab9481eee8a435e3.r2.dev/logo-horizontal-white.png"
          width="200"
          height="auto"
          alt="90 Surge logo"
        />
      </div>

      <h1 id="headline">90 SURGE TONIGHT</h1>

      <!-- Winner banner target (used by app.js setWinnerBanner/clearWinnerBanner) -->
      <h2 class="raffle raffle-title blink">
        <strong>ENTER OUR RAFFLE FOR A CHANCE TO WIN A 90 SURGE TEE!</strong>
      </h2>

      <h2>2 EASY STEPS!</h2>

      <ol>
        <li>
          Drop your name / nickname
          <div class="input-group">
            <input
              type="text"
              id="user-display-name"
              name="user_display_name"
              required
              placeholder=""
              autocomplete="off"
              inputmode="text"
              autocorrect="off"
              autocapitalize="none"
              spellcheck="false"
            />
          </div>
        </li>

        <li>
          Click to follow us on Facebook or Insta. Follow us on both for an extra chance at the draw ‚úåÔ∏è
          <div id="follow-gate">
            <div class="follow-links" style="display:flex; justify-content:center; gap:.5rem; flex-wrap:wrap;">
              <button type="button" class="follow-btn-fb" onclick="return openFacebook(event)">Facebook</button>
              <button type="button" class="follow-btn-ig" onclick="return openInstagram(event)">Instagram</button>
            </div>
          </div>
        </li>
      </ol>
    </div>

    <!-- Social follower counts -->
    <div class="followers-wrapper">
      <div class="follower-block">
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/FB_Logo_PNG.png/640px-FB_Logo_PNG.png"
          width="16"
          alt="Facebook"
        />
        <span id="fb-followers">‚Äî</span><span> followers</span>
      </div>
      <div class="follower-block">
        <img
          src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"
          width="16"
          alt="Instagram"
        />
        <span id="ig-followers">‚Äî</span><span> followers</span>
      </div>
    </div>
  </form>

  <!-- Slot machine mount point -->
  <div id="slot-root"></div>

  <!-- Winner modal -->
  <div id="winnerModal" class="winner-modal hidden" role="dialog" aria-modal="true" aria-labelledby="winnerName">
    <h1 class="winner-title">üéâ Raffle Winner üéâ</h1>
    <p id="winnerName" class="winner-name"></p>
    <button onclick="hideWinnerModal()" class="btn-modal-close">Close</button>
  </div>

  <!-- Slot init -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      if (typeof initSlotMachine !== 'function') {
        console.warn('initSlotMachine not found. Is /public/slot.js loading?');
        return;
      }
      initSlotMachine('#slot-root', {
        onResult: ({ targets, win }) => {
          // hook available if you want to react to spins
        }
      });
    });
  </script>
</body>
</html>
